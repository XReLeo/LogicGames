<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logic Games</title>
</head>

<body>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/XReLeo/LogicGames/style.css">

    <center>
        <h1>Logic Games</h1>
    </center>

    <script>

        async function go_with_fetch(){

            const options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    request: 'request to select'
                })
            };

            //sends the body of options to the endpoint '/api'
            console.log(window.location.href + '/select');
            const response = await fetch(window.location.href + '/select', options);
            //fetch returns the server response to the post
            const json = await response.json();

            if (json.status == 'success') {
                user = json.user
                document.body.innerHTML += 
                `<center id = "selectors">
                <ul>
                    <li class='game'><a href='/LogicGames/${user}/SkyScrapers' id="link">Skyscrapers</a></li>
                    <li class='game'><a href='/LogicGames/${user}/BattleShip' id="link">BattleShip</a></li>
                    <li class='game'><a href='/LogicGames/${user}/Chiocciola' id="link">Chiocciola</a></li>
                </ul>
                </center>`;

            }
            else {
                console.log('error');
            }
        }

        go_with_fetch()            

    </script>


</body>

</html>
